<div id="projectCreate" class="page">
  <div fxLayout="row" fxLayoutAlign="start start">
    <button (click)="goBackProjects()" color="primary" mat-button>
      <mat-icon> chevron_left </mat-icon>
    </button>
    <h2>  {{ "project_generic.projects" | translate }}</h2>
  </div>
  <div fxLayout="row" class="tab" fxLayoutGap="16px">
    <div [ngClass]="{ done: step > 0, active: step == 1 }" (click)="handleStep(1)" fxLayout="column" class="tab-group">
      <p class="tab-item">{{ "projects-create.register" | translate }}</p>
      <span class="tab-border"></span>
    </div>
    <div [ngClass]="{ done: step > 1, active: step == 2, disabled: projectId === 'cadastro' && step === 1 }"
      (click)="handleStep(2)" fxLayout="column" class="tab-group">
      <p class="tab-item">{{ "projects-create.activities_and_resources" | translate }}</p>
      <span class="tab-border"></span>
    </div>
    <div *ngIf="projectId !== 'cadastro'" [ngClass]="{ done: step > 2, active: step == 3 }" (click)="handleStep(3)"
      fxLayout="column" class="tab-group">
      <p class="tab-item">{{ "projects-create.follow_up" | translate }}</p>
      <span class="tab-border"></span>
    </div>
  </div>

  <app-projects-register-tab [hidden]="step != 1" [form]="projectForm" (onChange)="handleChanges($event)">
  </app-projects-register-tab>
  <app-projects-resources-tab [hidden]="step != 2" [form]="projectForm" (onChange)="handleChanges($event)">
  </app-projects-resources-tab>
  <app-projects-panel-tab [hidden]="step != 3" [form]="projectForm" (onChange)="handleChanges($event)">
  </app-projects-panel-tab>

  <div class="navigation-buttons" fxLayoutAlign="center end" fxLayoutGap="16px">
    <button mat-button *ngIf="step != 1" (click)="navigate('back')">
      {{ "project_generic.back_button" | translate }}
    </button>

    <button *ngIf="step == 2"  mat-flat-button (click)="navigate('next')" color="primary">
      {{ "project_generic.continue_button" | translate }}
    </button>

    <button mat-flat-button *ngIf="projectId == 'cadastro' &&  step == 1" color="primary" (click)="handleStep(1)" (click)="saveProject()">
      {{ "project_generic.save_button" | translate }}
    </button>
  </div>

  <div class="navigation-buttons" fxLayoutAlign="center end" fxLayoutGap="16px" *ngIf="projectId !== 'cadastro' &&  step == 1">
    <button [disabled]="projectForm.invalid" mat-flat-button (click)="editProject()" color="primary">
      {{ "project_generic.edit_button" | translate }}
    </button>
  </div>
</div>